import{t as e}from"./password-input-B8gUCWPK.js";import{$ as t,F as n,G as r,I as i,J as a,K as o,N as s,Q as c,U as l,X as u,Y as d,Z as f,_ as p,b as m,c as h,f as g,h as _,l as v,q as y,v as b,x,y as S}from"./index-CMrTxhGt.js";var C=t(c()),w=t(l());function T(){let t=a(),c=u(),{t:l}=r(),d=f(s),{register:h,handleSubmit:y,formState:{errors:b}}=p({resolver:_(g)});return(0,w.jsxs)(`form`,{onSubmit:y(async e=>{c(m());try{let r=await n.login(e);r.access_token&&localStorage.setItem(`access_token`,r.access_token),r.refresh_token&&localStorage.setItem(`refresh_token`,r.refresh_token),r.user&&(localStorage.setItem(`user`,JSON.stringify(r.user)),setTimeout(()=>{t(`/`)},1e3)),c(x(r)),o.success(`${l(`login_success`)}: ${l(`greeting`,{username:r.user.username})}`)}catch(e){let t=typeof e==`string`?e:e.response?.data?.message||e.message||`Unknown Error`;c(S(e)),o.error(`${l(`login_fail`)}: ${t}`)}}),className:`w-full flex flex-col gap-2`,children:[(0,w.jsx)(v,{type:`text`,placeholder:l(`email`),...h(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${b.username?`border-destructive`:``}
                        `,disabled:d}),b.username&&(0,w.jsx)(`p`,{className:`text-destructive`,children:b.username.message}),(0,w.jsx)(e,{placeholder:l(`password`),...h(`password`),className:`h-12 bg-background border-input-border rounded-xl
                    text-normaltext placeholder:text-normaltext-tertiary
                    ${b.password?`border-destructive`:``}
                  `,disabled:d}),b.password&&(0,w.jsx)(`p`,{className:`text-destructive`,children:b.password.message}),(0,w.jsx)(i,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:d,children:l(d?`loging_in`:`login`)})]})}var E=T;function D(){let e=a(),[t]=d(),{t:n}=r(),i=b();return(0,C.useEffect)(()=>{if(i){let n=t.get(`continue`)||`/`;e(n)}},[i,e,t]),(0,w.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6! mx-auto! flex flex-col gap-2 absolute top-full left-[50%] -translate-x-[50%] translate-y-[65%]`,children:[(0,w.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,w.jsx)(`h1`,{className:`text-center text-base sm:text-lg sm:my-4 text-foreground font-bold! text-[16px]`,children:n(`login_threads`)}),(0,w.jsx)(E,{}),(0,w.jsx)(`div`,{className:`text-center`,children:(0,w.jsx)(y,{to:`/auth/forgot-password`,className:`text-sm text-foreground`,children:n(`forgot_psw`)})}),(0,w.jsxs)(`div`,{className:`relative my-6!`,children:[(0,w.jsx)(h,{className:`bg-normaltext!`}),(0,w.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:n(`or`)})]})]}),(0,w.jsxs)(`div`,{className:`text-center`,children:[n(`havent_got_account`),(0,w.jsx)(y,{to:`/auth/register`,className:`text-foreground font-semibold hover:underline`,children:n(`register`)}),n(`or`),(0,w.jsx)(y,{to:`/`,className:`text-foreground font-semibold hover:underline`,children:n(`home`)})]})]})}var O=D;export{O as default};