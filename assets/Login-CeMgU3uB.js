import{t as e}from"./password-input-n5kQr0U3.js";import{$ as t,C as n,F as r,G as i,I as a,J as o,K as s,Q as c,S as l,U as u,X as d,Y as f,Z as p,_ as m,b as h,c as g,f as _,h as v,l as y,q as b,v as x,w as S}from"./index-D_Dprlbm.js";var C=t(c()),w=t(u());function T(){let t=o(),c=d(),{t:u}=i(),f=p(h),{register:g,handleSubmit:b,formState:{errors:x}}=m({resolver:v(_)});return(0,w.jsxs)(`form`,{onSubmit:b(async e=>{c(n());try{let n=await r.login(e);n.access_token&&localStorage.setItem(`access_token`,n.access_token),n.refresh_token&&localStorage.setItem(`refresh_token`,n.refresh_token),n.user&&(localStorage.setItem(`user`,JSON.stringify(n.user)),setTimeout(()=>{t(`/`)},1e3)),c(S(n)),s.success(`${u(`login_success`)}: ${u(`greeting`,{username:n.user.username})}`)}catch(e){let t=typeof e==`string`?e:e.response?.data?.message||e.message||`Unknown Error`;c(l(e)),s.error(`${u(`login_fail`)}: ${t}`)}}),className:`w-full flex flex-col gap-2`,children:[(0,w.jsx)(y,{type:`text`,placeholder:u(`email`),...g(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${x.username?`border-destructive`:``}
                        `,disabled:f}),x.username&&(0,w.jsx)(`p`,{className:`text-destructive`,children:x.username.message}),(0,w.jsx)(e,{placeholder:u(`password`),...g(`password`),className:`h-12 bg-background border-input-border rounded-xl
                    text-normaltext placeholder:text-normaltext-tertiary
                    ${x.password?`border-destructive`:``}
                  `,disabled:f}),x.password&&(0,w.jsx)(`p`,{className:`text-destructive`,children:x.password.message}),(0,w.jsx)(a,{type:`submit`,className:`w-full h-12 bg-foreground text-background !hover:bg-systemtext cursor-pointer rounded-2xl`,disabled:f,children:u(f?`loging_in`:`login`)})]})}var E=T;function D(){let e=o(),[t]=f(),{t:n}=i(),r=x();return(0,C.useEffect)(()=>{if(r){let n=t.get(`continue`)||`/`;e(n)}},[r,e,t]),(0,w.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6! mx-auto! flex flex-col gap-2 absolute top-full left-[50%] -translate-x-[50%] translate-y-[65%]`,children:[(0,w.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,w.jsx)(`h1`,{className:`text-center text-base sm:text-lg sm:my-4 text-foreground font-bold! text-[16px]`,children:n(`login_threads`)}),(0,w.jsx)(E,{}),(0,w.jsx)(`div`,{className:`text-center`,children:(0,w.jsx)(b,{to:`/auth/forgot-password`,className:`text-sm text-foreground`,children:n(`forgot_psw`)})}),(0,w.jsxs)(`div`,{className:`relative my-6!`,children:[(0,w.jsx)(g,{className:`bg-normaltext!`}),(0,w.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:n(`or`)})]})]}),(0,w.jsxs)(`div`,{className:`text-center`,children:[n(`havent_got_account`),(0,w.jsx)(b,{to:`/auth/register`,className:`text-foreground font-semibold hover:underline`,children:n(`register`)}),n(`or`),(0,w.jsx)(b,{to:`/`,className:`text-foreground font-semibold hover:underline`,children:n(`home`)})]})]})}var O=D;export{O as default};