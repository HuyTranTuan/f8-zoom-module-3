import{A as e,C as t,D as n,E as r,O as i,T as a,b as o,c as s,d as c,f as l,l as u,n as d,p as f,s as p,t as m,u as h,v as g,w as _,x as v,y}from"./index-C6p8qV9m.js";import{a as b,i as x,n as S}from"./validators-U8kGOQco.js";var C=h(`eye-off`,[[`path`,{d:`M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49`,key:`ct8e1f`}],[`path`,{d:`M14.084 14.158a3 3 0 0 1-4.242-4.242`,key:`151rxh`}],[`path`,{d:`M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143`,key:`13bj9a`}],[`path`,{d:`m2 2 20 20`,key:`1ooewy`}]]),w=h(`eye`,[[`path`,{d:`M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0`,key:`1nclc0`}],[`circle`,{cx:`12`,cy:`12`,r:`3`,key:`1v7zrd`}]]),T=e(i()),E=e(o()),D=({className:e,...t})=>{let[n,r]=(0,T.useState)(!1),i=()=>{r(!n)};return(0,E.jsxs)(`div`,{className:`relative`,children:[(0,E.jsx)(d,{type:n?`text`:`password`,className:e,...t}),(0,E.jsx)(`button`,{type:`button`,onClick:i,className:`absolute right-3 top-1/2 -translate-y-1/2 text-systemtext hover:text-normaltext transition-colors`,tabIndex:-1,children:n?(0,E.jsx)(C,{className:`size-5`}):(0,E.jsx)(w,{className:`size-5`})})]})};function O(){let e=_(),t=r(),{t:i}=p(),a=n(v),{register:o,handleSubmit:m,formState:{errors:h}}=b({resolver:x(S),mode:`onBlur`});return(0,E.jsxs)(`form`,{onSubmit:m(async n=>{t(l());try{let r=await y.login(n);r.access_token&&localStorage.setItem(`access_token`,r.access_token),r.refresh_token&&localStorage.setItem(`refresh_token`,r.refresh_token),r.user&&localStorage.setItem(`user`,JSON.stringify(r.user)),t(f(r)),s.success(`Đăng nhập thành công !`,{description:`Chào mừng ${r.user.username}`}),r.user&&setTimeout(()=>{e(`/`)},1e3)}catch(e){let n=e.response?.data?.message||e.message;t(c(n)),s.error(`Đăng nhập thất bại`,{description:n})}}),className:`w-full flex flex-col gap-3`,children:[(0,E.jsxs)(`div`,{children:[(0,E.jsx)(d,{type:`text`,placeholder:`Tên người dùng hoặc email`,...o(`username`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-2xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${h.username?`border-destructive`:``}
                        `,disabled:a}),h.username&&(0,E.jsx)(`p`,{className:`text-destructive text-sm mt-1`,children:h.username.message})]}),(0,E.jsxs)(`div`,{children:[(0,E.jsx)(D,{placeholder:`Mật khẩu`,...o(`password`),className:`
                        h-12
                        bg-background
                        border-input-border
                        rounded-xl
                        text-normaltext
                        placeholder:text-normaltext-tertiary
                        ${h.password?`border-destructive`:``}
                        `,disabled:a}),h.password&&(0,E.jsx)(`p`,{className:`text-destructive text-sm mt-1`,children:h.password.message})]}),(0,E.jsx)(u,{type:`submit`,className:`w-full h-12 rounded-xl font-semibold text-background !hover:text-threaditembg bg-foreground !hover:bg-normaltext`,disabled:a,children:i(a?`loging_in`:`login`)})]})}var k=O;function A(){r();let e=_(),[n]=a(),{t:i}=p(),o=g(),{register:s,handleSubmit:c,formState:{errors:l}}=b({defaultValues:{email:`sondang1234@gmail.com`,password:`12341234`}});return(0,T.useEffect)(()=>{if(o){let t=n.get(`continue`)||`/`;e(t)}},[o,e,n]),(0,E.jsxs)(`div`,{className:`max-w-[370px] min-w-[300px] p-6! mx-auto! flex flex-col gap-2 absolute top-full left-[50%] -translate-x-[50%] translate-y-[50%]`,children:[(0,E.jsxs)(`div`,{className:`flex flex-col gap-2`,children:[(0,E.jsx)(`h1`,{className:`text-center text-base sm:text-lg sm:my-4 text-foreground font-bold! text-[16px]`,children:i(`login_threads`)}),(0,E.jsx)(k,{}),(0,E.jsx)(`div`,{className:`text-center`,children:(0,E.jsx)(t,{to:`/forgot-password`,className:`text-sm text-foreground`,children:i(`forgot_psw`)})}),(0,E.jsxs)(`div`,{className:`relative my-6!`,children:[(0,E.jsx)(m,{className:`bg-normaltext!`}),(0,E.jsx)(`span`,{className:`absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 px-4 text-sm text-systemtext!`,children:i(`or`)})]})]}),(0,E.jsx)(`div`,{className:`bg-card border border-border rounded-2xl p-4 sm:p-6 text-center`,children:(0,E.jsxs)(`p`,{className:`text-sm text-foreground-secondar`,children:[i(`havent_got_account`),(0,E.jsx)(t,{to:`/auth/register`,className:`text-foreground font-semibold hover:underline`,children:i(`register`)})]})})]})}var j=A;export{j as default};