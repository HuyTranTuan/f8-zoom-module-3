import{$ as e,B as t,G as n,H as r,I as i,L as a,P as o,Q as s,R as c,U as l,V as u,W as d,X as f,Z as p,a as m,i as h,l as g,n as _,o as v,r as y,s as b,t as x,u as S,y as C,z as w}from"./index-D_Dprlbm.js";var T=r(`hash`,[[`line`,{x1:`4`,x2:`20`,y1:`9`,y2:`9`,key:`4lhtct`}],[`line`,{x1:`4`,x2:`20`,y1:`15`,y2:`15`,key:`vyu0kd`}],[`line`,{x1:`10`,x2:`8`,y1:`3`,y2:`21`,key:`1ggp8o`}],[`line`,{x1:`16`,x2:`14`,y1:`3`,y2:`21`,key:`weycgp`}]]),E=r(`search`,[[`path`,{d:`m21 21-4.34-4.34`,key:`14j7rj`}],[`circle`,{cx:`11`,cy:`11`,r:`8`,key:`4ej97u`}]]),D=e(s()),O=e(l());function k({children:e}){return(0,O.jsx)(`div`,{className:`border-l border-r border-border h-full bg-content-background overflow-hidden`,style:{boxShadow:`0 1px 2px rgba(0, 0, 0, 0.04), 0 4px 8px rgba(0, 0, 0, 0.06)`},children:e})}var A=k;function j(e,t){let[n,r]=(0,D.useState)(e);return(0,D.useEffect)(()=>{let n=setTimeout(()=>{r(e)},t);return()=>{clearTimeout(n)}},[e,t]),n}var M=j;function N({value:e,onChange:r,onSearch:i}){let{t:a}=n(`search`),[o,s]=(0,D.useState)(e||``),c=M(o,500),l=(0,D.useRef)(!1);(0,D.useEffect)(()=>{if(l.current){l.current=!1;return}c!==e&&(r?.(c),c.trim()&&i?.(c.trim()))},[c,e,r,i]),(0,D.useEffect)(()=>{s(e||``)},[e]);let u=(0,D.useCallback)(()=>{l.current=!0,s(``),r?.(``)},[r]);return(0,O.jsxs)(`div`,{className:`relative`,children:[(0,O.jsx)(E,{className:`absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground`}),(0,O.jsx)(g,{type:`text`,value:o,onChange:e=>s(e.target.value),placeholder:a(`placeholder`),className:`pl-10 pr-10 h-11 bg-secondary/50 border-none rounded-xl focus-visible:ring-1`}),o&&(0,O.jsx)(`button`,{type:`button`,onClick:u,className:`absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 rounded-full bg-muted-foreground/20 hover:bg-muted-foreground/30 flex items-center justify-center transition-colors`,children:(0,O.jsx)(t,{className:`h-3 w-3 text-muted-foreground`})})]})}var P=N,F=[`all`,`topics`,`users`];function I({activeMode:e,onChange:t}){let{t:r}=n(`search`);return(0,O.jsx)(`div`,{className:`flex border-b border-border`,children:F.map(n=>(0,O.jsxs)(`button`,{onClick:()=>t(n),className:d(`flex-1 py-3 text-sm font-medium transition-colors relative`,e===n?`text-foreground`:`text-muted-foreground hover:text-foreground/80`),children:[r(`tabs.${n}`),e===n&&(0,O.jsx)(`span`,{className:`absolute bottom-0 left-0 right-0 h-0.5 bg-foreground`})]},n))})}var L=I;function R({user:e}){let{t}=n(`search`),r=f(),s=p(C),[l,d]=(0,D.useState)(!1),[m,h]=(0,D.useState)(!1);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(`div`,{className:`flex items-start gap-3 p-4 hover:bg-secondary/30 transition-colors cursor-pointer`,children:[(0,O.jsxs)(a,{className:`h-10 w-10 shrink-0`,children:[(0,O.jsx)(w,{src:e.avatar_url,alt:e.username}),(0,O.jsx)(c,{children:e.username?.[0]?.toUpperCase()})]}),(0,O.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,O.jsxs)(`div`,{className:`flex items-center gap-1`,children:[(0,O.jsx)(`span`,{className:`font-semibold text-sm truncate`,children:e.username}),e.verified&&(0,O.jsx)(u,{className:`h-4 w-4 text-blue-500 shrink-0`})]}),e.name&&(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground truncate`,children:e.name}),e.bio&&(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground line-clamp-2 mt-0.5`,children:e.bio}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground mt-1`,children:t(`followers`,{count:e.followers_count||0})})]}),(0,O.jsx)(i,{variant:e.is_following?`outline`:`default`,size:`sm`,onClick:async()=>{if(!s){h(!0);return}d(!0);try{e.is_following?await r(b(e.id)).unwrap():await r(x(e.id)).unwrap()}catch(e){console.error(`Follow action failed:`,e)}finally{d(!1)}},disabled:l,className:`shrink-0 rounded-xl px-5`,children:e.is_following?t(`following`):t(`follow`)})]}),(0,O.jsx)(o,{open:m,onOpenChange:h,title:t(`loginRequired.title`),description:t(`loginRequired.description`)})]})}var z=R;function B({topic:e}){let{t}=n(`search`);return(0,O.jsxs)(`div`,{className:`flex items-center gap-3 p-4 hover:bg-secondary/30 transition-colors cursor-pointer`,children:[(0,O.jsx)(`div`,{className:`h-10 w-10 rounded-full bg-secondary flex items-center justify-center flex-shrink-0`,children:(0,O.jsx)(T,{className:`h-5 w-5 text-muted-foreground`})}),(0,O.jsxs)(`div`,{className:`flex-1 min-w-0`,children:[(0,O.jsx)(`p`,{className:`font-semibold text-sm`,children:e.name}),e.description&&(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground line-clamp-1`,children:e.description}),(0,O.jsx)(`p`,{className:`text-sm text-muted-foreground mt-0.5`,children:t(`posts`,{count:e.posts_count||0})})]})]})}var V=B;function H({type:e=`user`}){return(0,O.jsxs)(`div`,{className:`flex items-start gap-3 p-4`,children:[(0,O.jsx)(S,{className:`h-10 w-10 rounded-full flex-shrink-0`}),(0,O.jsxs)(`div`,{className:`flex-1 min-w-0 space-y-2`,children:[(0,O.jsx)(S,{className:`h-4 w-24`}),(0,O.jsx)(S,{className:`h-3 w-32`}),e===`user`&&(0,O.jsx)(S,{className:`h-3 w-20`})]}),e===`user`&&(0,O.jsx)(S,{className:`h-8 w-20 rounded-xl flex-shrink-0`})]})}var U=H;function W(){let{t:e}=n(`search`),t=f(),{query:r,searchMode:i,topics:a,users:o,loading:s}=p(e=>e.search),c=(0,D.useCallback)((e,n)=>{n===`users`?t(_({page:1,perPage:20})):e.trim()&&(n===`all`?t(y({query:e,page:1})):n===`topics`&&t(h({query:e})))},[t]),l=(0,D.useCallback)(e=>{t(v(e)),c(e,i)},[t,i,c]),u=(0,D.useCallback)(e=>{t(m(e)),c(r,e)},[t,r,c]);(0,D.useEffect)(()=>{window.scrollTo(0,0),i===`users`&&o.length===0&&t(_({page:1,perPage:20}))},[t,i,o.length]);let d=()=>(0,O.jsx)(O.Fragment,{children:Array.from({length:5}).map((e,t)=>(0,O.jsx)(U,{type:i===`topics`?`topic`:`user`},t))}),g=()=>a.length===0&&r&&!s?(0,O.jsx)(`p`,{className:`text-center text-muted-foreground py-8`,children:e(`noResults`)}):a.map(e=>(0,O.jsx)(V,{topic:e},e.id)),b=()=>o.length===0&&!s?(0,O.jsx)(`p`,{className:`text-center text-muted-foreground py-8`,children:e(`noResults`)}):o.map(e=>(0,O.jsx)(z,{user:e},e.id));return(0,O.jsxs)(A,{children:[(0,O.jsx)(`div`,{className:`p-4`,children:(0,O.jsx)(P,{value:r,onChange:e=>t(v(e)),onSearch:l})}),(0,O.jsx)(L,{activeMode:i,onChange:u}),(0,O.jsx)(`div`,{className:`divide-y divide-border`,children:(()=>{if(s)return d();switch(i){case`topics`:return g();case`users`:return b();case`all`:default:{let t=a.length>0,n=o.length>0;return!t&&!n&&r?(0,O.jsx)(`p`,{className:`text-center text-muted-foreground py-8`,children:e(`noResults`)}):(0,O.jsxs)(O.Fragment,{children:[t&&(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`h3`,{className:`px-4 py-2 text-sm font-semibold text-muted-foreground`,children:e(`tabs.topics`)}),a.slice(0,3).map(e=>(0,O.jsx)(V,{topic:e},e.id))]}),n&&(0,O.jsxs)(`div`,{children:[(0,O.jsx)(`h3`,{className:`px-4 py-2 text-sm font-semibold text-muted-foreground`,children:e(`tabs.users`)}),o.map(e=>(0,O.jsx)(z,{user:e},e.id))]})]})}}})()})]})}var G=W;export{G as default};